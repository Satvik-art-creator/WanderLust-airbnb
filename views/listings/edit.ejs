<% layout("layouts/boilerplate.ejs") %>

<h1 class="mt-3 mb-3">Edit your Listing</h1>

<form
  method="POST"
  action="/listings/<%=listData._id%>/?_method=PUT"
  class="row needs-validation"
  enctype="multipart/form-data"
  novalidate
>
  <div class="col-sm-12">
    <label for="title" class="form-label">Title</label>
    <input
      type="text"
      name="listing[title]"
      id="title"
      class="form-control"
      value="<%=listData.title%>"
      placeholder="Enter Title"
      required
    />
    <div class="valid-feedback">Looks good!</div>
  </div>

  <div class="col-sm-12">
    <label for="desc" class="form-label">Description</label>
    <input
      type="text"
      name="listing[description]"
      id="desc"
      class="form-control"
      value="<%=listData.description%>"
      placeholder=" Enter Description"
      required
    />
    <div class="invalid-feedback">Keep the description shorter</div>
  </div>

  <div class="col-sm-12">
    Original Listing Image <br />
    <img src="<%=orgListingUrl%>" alt="Listing image" width="250px" height="250px" style="filter: blur(1px)" />
  </div>

  <div class="col-sm-12">
    <label for="img" class="form-label">Upload New Image</label>
    <input
      type="file"
      name="listing[image]"
      id="img"
      class="form-control"
    />
    <div class="invalid-feedback">Upload valid image</div>
  </div>

  <div class="col-md-4 col-sm-12">
    <label for="price" class="form-label">Price</label>
    <div class="input-group has-validation">
      <span class="input-group-text" id="inputGroupPrepend">&#8377;</span>
      <input
        type="number"
        name="listing[price]"
        id="price"
        class="form-control"
        value="<%=listData.price%>"
        placeholder="Enter price"
        required
      />
      <div class="invalid-feedback">Price should be valid</div>
    </div>
  </div>

  <div class="col-md-8 col-sm-12">
    <label for="country" class="form-label">Country</label>
    <input
      type="text"
      name="listing[country]"
      id="country"
      class="form-control"
      value="<%=listData.country%>"
      placeholder="Enter Country"
      required
    />
    <div class="invalid-feedback">Country name should be valid</div>
  </div>

  <div class="col-sm-12">
    <label for="location" class="form-label">Location</label>
    <input
      type="text"
      name="listing[location]"
      id="location"
      class="form-control"
      placeholder="Enter Location"
      value="<%=listData.location%>"
      required
    />
    <div class="invalid-feedback">Location should be valid</div>
  </div>

  <div class="col">
    <button type="submit" class="btn btn-danger mt-3 mb-3">Make changes</button>
  </div>
</form>
